<div class="grid gap-8 max-w-4xl mx-auto">
    <h1 class="text-center text-3xl">ConfiguraÃ§Ãµes âš™ï¸</h1>

    <div class="bg-base-200 shadow-sm rounded-lg p-6">
        <h2 class="text-xl font-bold mb-4">PreferÃªncias</h2>
        <div class="divide-y divide-base-300">
            <div data-action="change->theme-switcher#switch" class="flex items-center justify-between py-4 first:pt-0">
                <label for="theme" class="font-semibold">Escolha o tema ğŸ¨</label>
                <select name="theme" id="theme" data-theme-switcher-target="theme" class="select select-bordered select-sm w-full max-w-xs">
                    <% ConfigurationsHelper::THEMES.each do |theme|%>
                        <option value="<%= theme %>" <%= 'selected' if user_theme == theme %>><%= theme.capitalize %></option>
                    <% end %>
                </select>
            </div>

            <div class="flex items-center justify-between py-4" data-controller="email-notifications">
                <label for="email-notifications-toggle" class="font-semibold">NotificaÃ§Ãµes por email ğŸ“§</label>
                <div class="form-control">
                    <%= form_with model: @user, url: change_email_notifications_path, method: :patch, local: false, class: "flex items-center gap-2" do |form| %>
                        <input type="checkbox" 
                               id="email-notifications-toggle"
                               name="configuration[email_notifications]" 
                               value="1"
                               <%= 'checked' if @user.email_notifications %>
                               class="toggle toggle-primary" 
                               data-action="change->email-notifications#toggle" />
                    <% end %>
                </div>
            </div>

            <div class="flex items-center justify-between py-4 last:pb-0" data-controller="push-notifications">
                <label for="push-notifications-toggle" class="font-semibold">NotificaÃ§Ãµes push ğŸ””</label>
                <div class="form-control">
                    <input type="checkbox"
                           id="push-notifications-toggle"
                           data-push-notifications-target="toggle"
                           data-action="change->push-notifications#toggle"
                           <%= 'checked' if current_user.push_subscription.present? %>
                           class="toggle toggle-primary" />
                </div>
            </div>
        </div>
    </div>

    <div class="grid gap-6">
        <h2 class="font-bold text-2xl text-center">Categorias Cadastradas:</h2>
        <div class="flex flex-col md:flex-row gap-6">
            <div class="grid gap-2 bg-base-200 shadow-sm rounded-lg p-6 w-full">
                <div class="flex justify-between items-center">
                    <h3 class="font-bold md:text-xl">Categorias de Despesas ğŸ’¸</h3>
                    <%= link_to new_category_path, data: { turbo_frame: 'modal' } do %>
                        <button class="btn btn-ghost btn-sm w-10 h-10"> â• </button>
                    <% end %>
                </div>
                <ul id="expenses">
                    <% @expenses_categories.each do |category| %>
                        <%= render 'categories_list', category: category %>
                    <% end %>
                </ul>
            </div>

            <div class="grid gap-2 bg-base-200 shadow-sm rounded-lg p-6 w-full">
                <div class="flex justify-between items-center">
                    <h3 class="font-bold md:text-xl">Categorias de Receitas ğŸ’°</h3>
                     <%= link_to new_category_path, data: { turbo_frame: 'modal' } do %>
                        <button class="btn btn-ghost btn-sm w-10 h-10"> â• </button>
                    <% end %>
                </div>
                <ul id="incomes">
                    <% @incomes_categories.each do |category| %>
                        <%= render 'categories_list', category: category %>
                    <% end %>
                </ul>
            </div>
        </div>    
    </div>
</div>